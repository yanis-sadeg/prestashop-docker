# ======================================
# Configuration PRODUCTION - PrestaShop
# ======================================
# Copiez ce fichier vers .env et adaptez les valeurs pour votre environnement de production

# ======================================
# Configuration SSL / Traefik
# ======================================
DOMAIN=votre-domaine.com
LETSENCRYPT_EMAIL=contact@votre-domaine.com

# ======================================
# Configuration PHP - PRODUCTION
# ======================================
# Valeurs optimisées pour la performance en production

# Memory & Performance
PHP_MEMORY_LIMIT=256M              # 256M ou 512M selon la charge
PHP_MAX_EXECUTION_TIME=300         # 300s (5 min) suffisant pour la prod
PHP_MAX_INPUT_TIME=300
PHP_MAX_INPUT_VARS=10000           # Nécessaire pour PrestaShop

# Upload & Post
PHP_UPLOAD_MAX_FILESIZE=32M        # Limiter en prod pour la sécurité
PHP_POST_MAX_SIZE=32M

# Error Reporting - IMPORTANT EN PRODUCTION
PHP_DISPLAY_ERRORS=Off             # TOUJOURS Off en production
PHP_DISPLAY_STARTUP_ERRORS=Off     # TOUJOURS Off en production
PHP_ERROR_REPORTING=E_ALL & ~E_DEPRECATED & ~E_STRICT

# Session
PHP_SESSION_GC_MAXLIFETIME=1440
PHP_SESSION_COOKIE_LIFETIME=0
PHP_SESSION_COOKIE_SECURE=On            # HTTPS uniquement
PHP_SESSION_COOKIE_SAMESITE=Strict      # Protection CSRF

# Timezone
PHP_TIMEZONE=Europe/Paris

# Security - Disable dangerous functions
# Note: proc_open/proc_close are sometimes needed by PrestaShop modules
# Adjust if needed based on your modules
PHP_DISABLE_FUNCTIONS=pcntl_alarm,pcntl_fork,pcntl_waitpid,pcntl_wait,pcntl_wifexited,pcntl_wifstopped,pcntl_wifsignaled,pcntl_wifcontinued,pcntl_wexitstatus,pcntl_wtermsig,pcntl_wstopsig,pcntl_signal,pcntl_signal_get_handler,pcntl_signal_dispatch,pcntl_get_last_error,pcntl_strerror,pcntl_sigprocmask,pcntl_sigwaitinfo,pcntl_sigtimedwait,pcntl_exec,pcntl_getpriority,pcntl_setpriority,pcntl_async_signals,system,exec,shell_exec,passthru,phpinfo,show_source,highlight_file,popen,proc_nice,dl

# Realpath Cache - Performance
PHP_REALPATH_CACHE_SIZE=4096k
PHP_REALPATH_CACHE_TTL=600

# OPcache - CRITIQUE EN PRODUCTION
PHP_OPCACHE_ENABLE=1                    # TOUJOURS activé en production
PHP_OPCACHE_MEMORY=256                  # 256MB recommandé
PHP_OPCACHE_INTERNED_STRINGS=16
PHP_OPCACHE_MAX_FILES=20000
PHP_OPCACHE_REVALIDATE_FREQ=2
PHP_OPCACHE_VALIDATE_TIMESTAMPS=0       # 0 = Désactivé pour max performance

# ======================================
# Build Arguments
# ======================================
INSTALL_XDEBUG=false                    # NEVER use Xdebug in production!

# ======================================
# SMTP Configuration - PRODUCTION
# ======================================
# CRITICAL: Configure a real SMTP server for production
# Popular options: Gmail, SendGrid, AWS SES, Mailgun, Postmark, Brevo (Sendinblue)

# SMTP Server (REQUIRED)
SMTP_HOST=smtp.gmail.com                # Example: Gmail (change to your provider)
SMTP_PORT=587                           # 587 (TLS) or 465 (SSL)

# SMTP Authentication (REQUIRED)
SMTP_USER=your-email@gmail.com          # Your SMTP username/email
SMTP_PASSWORD=your-app-password         # Your SMTP password or API key
SMTP_ENCRYPTION=tls                     # tls (port 587) or ssl (port 465)
SMTP_AUTH=true                          # Always true in production

# ======================================
# SMTP Provider Examples
# ======================================
# Gmail (App Password required - https://support.google.com/accounts/answer/185833)
#   SMTP_HOST=smtp.gmail.com
#   SMTP_PORT=587
#   SMTP_ENCRYPTION=tls
#
# SendGrid (API Key required - https://sendgrid.com)
#   SMTP_HOST=smtp.sendgrid.net
#   SMTP_PORT=587
#   SMTP_USER=apikey
#   SMTP_PASSWORD=your-sendgrid-api-key
#   SMTP_ENCRYPTION=tls
#
# AWS SES (IAM credentials required)
#   SMTP_HOST=email-smtp.eu-west-1.amazonaws.com
#   SMTP_PORT=587
#   SMTP_USER=your-aws-smtp-username
#   SMTP_PASSWORD=your-aws-smtp-password
#   SMTP_ENCRYPTION=tls
#
# Mailgun
#   SMTP_HOST=smtp.mailgun.org
#   SMTP_PORT=587
#   SMTP_USER=postmaster@your-domain.com
#   SMTP_PASSWORD=your-mailgun-smtp-password
#   SMTP_ENCRYPTION=tls
#
# Brevo (Sendinblue)
#   SMTP_HOST=smtp-relay.brevo.com
#   SMTP_PORT=587
#   SMTP_USER=your-brevo-email
#   SMTP_PASSWORD=your-brevo-smtp-key
#   SMTP_ENCRYPTION=tls

# ======================================
# Security Notes
# ======================================
# 1. Change default database passwords
# 2. Configure proper variables in PrestaShop's define.inc.php
# 3. Ensure display_errors is Off
# 4. Enable HTTPS and force HTTP->HTTPS redirection
# 5. Keep PrestaShop and PHP updated regularly
# 6. NEVER commit .env file with real credentials to version control
# 7. Use environment-specific SMTP credentials (not your personal email password)
